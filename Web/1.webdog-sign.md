<h1 id="lQf8Q">HTTP请求分析（一）</h1>
<h2 id="kADjL">1. 题目逻辑分析</h2>


![](https://cdn.nlark.com/yuque/0/2024/png/45579424/1728400022651-f4ddde1c-3160-4f37-910f-5d6bb030070b.png)

1. `error_reporting(0)` 关闭报错信息提示；  
2. `highlight_file(__FILE__)` 高亮PHP代码；  
3. `include "flag.php"` 引入一个叫 `flag.php` 的文件（在云端）；  
4. `if($_GET['manba']=="manba")` 
    - 该语句判断 GET 请求中是否有 `manba` 参数，并且其值是否为 `manba`。
    - 如果存在 `manba`，再看 POST 请求中 `manba2` 参数是否为 `I_want_to_get_the_flag!`。如果是的，就输出文件 `flag`，就是我们要的内容。
5. 如果没有 `manba`，则输出 `you are not manba`。

<h2 id="FXMEJ">2. 解题前的知识点</h2>
在解题之前，我们需要了解一下浏览器中的 GET 和 POST 请求及其他相关内容。

<h3 id="i4SyV">(1) GET请求</h3>
+ 主要用于请求数据（获取资源）。
+ **发送方式**：
    1. **在浏览器中发送**：
        * 格式：`URL + '?' + 参数1=值1&参数2=值2`
        * 示例：`https://example.com/search?query=chatgpt`
        * **本质**：

```plain
HTTP请求报文
GET /search?query=chatgpt HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.71 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Connection: keep-alive
```

这是一段HTTP报文，通常在浏览器后台，可以通过开发者工具查看和编辑。

    2. **通过 JavaScript 发送**：  
（未使用到，后续再补充）

<h3 id="wCQ2O">(2) POST请求</h3>
+ 用于向服务器提交数据。
+ **发送方式**：  
使用开发者工具或其他工具发送 POST 请求包。

<h3 id="Xrkgw">1. GET请求的组成成分：</h3>
<h4 id="w1FuJ">1. 请求行</h4>
+ 包括：
    - 请求方法（这里就是GET）
    - 请求路径（一般就在URL里面）
    - HTTP协议版本（HTTP/1.1或HTTP/2）以及参数
+ 示例：

 GET /search?query=chatgpt HTTP/1.1  

<h4 id="O85qD">2. 请求头</h4>
+ 包括：
+ `Host`：指定目标服务器的主机名和端口号。对于 HTTP/1.1 版本，这个字段是必须的。  
+ `User-Agent`：描述发出请求的客户端的详细信息（通常是浏览器）。
+ `Accept`：告知服务器客户端希望接受的响应内容类型（如HTML、XML、JSON等）。
+ `Accept-Encoding`：指定客户端可以支持的内容编码类型（如gzip、deflate等）。
+ `Connection`：指示是否希望保持连接或关闭连接。

<h4 id="bRktm">3. 空一行</h4>
+ 表示请求头结束。

<h4 id="O9KKh">4. 请求体</h4>
+ GET 请求一般把参数放在请求行里面，所以一般没有请求体。

<h3 id="eOHQl">2. POST请求的组成成分：</h3>
![](https://cdn.nlark.com/yuque/0/2024/png/45579424/1728400050593-20838f9a-aafa-458e-9d3c-215b3542ea67.png)

<h4 id="LTRGf">1. 请求行</h4>
+ 和 GET 类似，但没有参数（在请求体里面）。

<h4 id="cN0YN">2. 请求头</h4>
+ 有几个新的头部字段：
+ `Content-Type`：指定请求体中数据的类型，通常是 `application/x-www-form-urlencoded`（表单提交）或 `application/json`（JSON 数据）。
+ `Content-Length`：指定请求体的字节长度。

<h4 id="pXVbC">3. 空行</h4>
+ 表示请求头的结束。

<h4 id="UDvZN">4. 请求体</h4>
+ 数据内容可以根据 `Content-Type` 的不同而变化：
+ 如果 `Content-Type` 是 `application/x-www-form-urlencoded`：数据以键值对的形式发送，格式类似于 URL 查询字符串。
+ 如果 `Content-Type` 是 `application/json`：数据以 JSON 格式发送。

<h3 id="HUDva">3. 总结</h3>
+ 解题过程已经明显，需要了解 GET 和 POST 请求的工作原理及其在浏览器中的实际表现。

